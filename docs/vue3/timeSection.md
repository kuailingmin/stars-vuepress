# 时间切片

根据尤雨溪的推文，此功能不会包含在 Vue 3 中。

Vue 3 另一个令人兴奋的性能功能是对时间切片的实验性支持，但是它很少被提及。

用一个比喻来解释什么是时间切片。想象有一条买冰淇淋的队伍，它非常的长。因为那是镇上最好的冰淇淋，人们一个接一个的去买。由于某种原因，没有关于可用口味的信息。要得到这个信息，你需要询问直接出售冰淇淋的女士。

在这种情况下，我们可能最终会得到 2 条记录——其中一条给想要购买冰淇淋的人（说服他们耐心等待），另一条给希望在选择之前了解更多口味信息的人，我们应该尽快获得这个信息。不幸的是，只有一位女士在卖冰淇淋，她在为“主”线上的所有客户提供服务之前不会回答任何问题。

对于尚未被说服的客户来说，这并不是最好的体验，大多数人可能会发现这不值得等待。为了解决这个问题，女士可以在每 2 至 3 个服务对象中回答一个问题。两组都应该对此解决方案感到满意。

这正是 CPU 与 Web 应用一起工作的方式。我们有一条“主”队列（称为“主线程”），需要完成其所有主要任务（脚本、渲染等），然后才能响应用户交互。对于某些页面，这可能会导致非常糟糕的用户体验，具体取决于 Vue 组件加载或重新渲染所需的时间。

为了使其更可靠，最好对此脚本进行评估并“切”成段，在每次执行后查看是否有用户输入要处理。这样，无论需要进行多少次渲染或重新渲染，程序都将保持响应状态。这就是在 Vue 3 中的工作方式。

这是尤雨溪在 Vue 3 中展示时间分片功能的方式。请注意脚本执行时间轴中的小间隙，可以在这些间隙中处理用户输入。